{%- assign variant = product.selected_or_first_available_variant -%}

{%- comment -%} Top-right badge: Sold Out > Metafield > Sale {%- endcomment -%}
<div class="product-badges product-badges--top-right">
  {%- if product.available == false -%}
    <div class="product-badges__badge product-badges__badge--rectangle">
      {{ 'content.product_badge_sold_out' | t }}
    </div>
  {%- elsif product.metafields.custom.sale_percentage != blank -%}
    <div class="product-badges__badge product-badges__badge--rectangle">
      {{ product.metafields.custom.sale_percentage }}
    </div>
  {%- elsif product.compare_at_price > product.price -%}
    <div class="product-badges__badge product-badges__badge--rectangle">
      {{ 'content.product_badge_sale' | t }}
    </div>
  {%- endif -%}
</div>

{%- comment -%} Top-left badge: Only X Left for low-stock products (transparent background) {%- endcomment -%}
{%- if variant.available and variant.inventory_quantity <= 5 and variant.inventory_quantity > 0 -%}
  <div class="product-badges product-badges--top-left">
    <div class="product-badges__badge product-badges__badge--rectangle product-badges__badge--transparent">
      Only {{ variant.inventory_quantity }} Left
    </div>
  </div>
{%- endif -%}

{% stylesheet %}
.product-badges {
  position: absolute;
  z-index: 10;
}

.product-badges--top-right {
  top: 20px;   /* top offset from image edge */
  right: 8px;
}

.product-badges--top-left {
  top: 20px;   /* top offset from image edge */
  left: 8px;
}

.product-badges__badge {
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: var(--color-foreground);
  background: var(--color-background);
  font-size: var(--font-size--xs);
  font-family: var(--font-body--family);
  font-weight: var(--font-body--weight);
  text-transform: uppercase;
  border-radius: var(--badge-border-radius);
}

.product-badges__badge--rectangle {
  padding-block: 4px;   /* vertical padding inside badge */
  padding-inline: 8px;  /* horizontal padding inside badge */
}

/* Transparent badge for "Only X Left" */
.product-badges__badge--transparent {
  background: transparent;
  color: var(--color-foreground); /* keeps text visible */
}
{% endstylesheet %}
