<div
  class="product-badges product-badges--top-right"
  style="
    --badge-border-radius: 4px;
  "
>
  {%- assign show_badge = false -%}
  {%- assign badge_text = '' -%}

  {%- if product.available == false -%}
    {%- assign show_badge = true -%}
    {%- assign badge_text = 'content.product_badge_sold_out' | t -%}
  {%- elsif product.compare_at_price_max and product.compare_at_price_max > product.price -%}
    {%- assign discount = product.compare_at_price_max | minus: product.price -%}
    {%- assign discount = discount | divided_by: product.compare_at_price_max | times: 100 -%}
    {%- assign discount = discount | round -%}
    {%- if discount > 0 -%}
      {%- assign show_badge = true -%}
      {%- assign badge_text = discount | append: '% Off' -%}
    {%- endif -%}
  {%- endif -%}

  {%- if show_badge -%}
    <div class="product-badges__badge" style="background: #000; color:#fff; padding: 0.25rem 0.5rem; border-radius:4px; font-weight:600; font-size:0.85rem;">
      {{ badge_text }}
    </div>
  {%- endif -%}
</div>
